<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="darkreader-lock" />
  <meta name="color-scheme" content="light dark" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob:; connect-src 'self'; worker-src 'self' blob:; child-src 'self' blob:;">
  <title>NeuroViz - Neural Network Visualiser</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&display=swap"
    rel="stylesheet" />
  <!-- Critical CSS inline to prevent FOUC -->
  <style>
    /* CSS Variables must be duplicated here for FOUC prevention */
    :root {
      --color-bg-primary-rgb: 10, 14, 26;
      --color-text-primary-rgb: 241, 245, 249;
    }

    html:not(.dark) {
      --color-bg-primary-rgb: 248, 250, 252;
      --color-text-primary-rgb: 15, 23, 42;
    }

    /* Base theme colours applied immediately using CSS variables */
    html.dark body {
      background: rgb(var(--color-bg-primary-rgb));
      color: rgb(var(--color-text-primary-rgb));
    }

    html:not(.dark) body {
      background: rgb(var(--color-bg-primary-rgb));
      color: rgb(var(--color-text-primary-rgb));
    }

    /* Hide content until styles load */
    .app-container {
      opacity: 0;
      transition: opacity 0.15s ease-in;
    }

    .app-container.loaded {
      opacity: 1;
    }
  </style>

</head>

<body>
  <!-- Live Region for Screen Reader Announcements -->
  <div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>

  <div class="app-container" role="application" aria-label="NeuroViz Neural Network Trainer">

    <!-- DASHBOARD GRID LAYOUT -->
    <div class="dashboard-grid">

      <!-- HEADER (Row 1, Spans All) -->
      <header style="grid-area: header;"
        class="flex items-center justify-between py-2 px-4 bg-navy-900/80 backdrop-blur-md z-50 border-b border-white/5"
        role="banner">
        <div class="flex items-center gap-2">
          <h1 class="text-lg font-bold text-gradient glow-accent">NeuroViz</h1>
          <span class="text-slate-500 text-xs hidden md:inline">Engineer's Dashboard</span>
        </div>
        <div class="flex items-center gap-1 sm:gap-2">
          <button id="btn-help" class="p-2 rounded-lg bg-navy-800 hover:bg-navy-700 transition-colors"
            aria-label="Help & Tutorials" title="Help & Tutorials">
            <svg class="w-5 h-5 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </button>
          <button id="btn-fullscreen" class="p-2 rounded-lg bg-navy-800 hover:bg-navy-700 transition-colors"
            aria-label="Toggle fullscreen" title="Toggle fullscreen (F)">
            <!-- Expand icon (shown when not fullscreen) -->
            <svg id="icon-expand" class="w-5 h-5 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
            </svg>
            <!-- Compress icon (shown when fullscreen, hidden by default) -->
            <svg id="icon-compress" class="w-5 h-5 text-slate-300 hidden" fill="none" stroke="currentColor"
              viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l-5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25" />
            </svg>
          </button>
          <button id="btn-theme-toggle" class="p-2 rounded-lg bg-navy-800 hover:bg-navy-700 transition-colors"
            aria-label="Toggle theme" title="Toggle light/dark theme">
            <!-- Sun icon (shown in dark mode) -->
            <svg id="icon-sun" class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
            <!-- Moon icon (shown in light mode, hidden by default) -->
            <svg id="icon-moon" class="w-5 h-5 text-slate-600 hidden" fill="none" stroke="currentColor"
              viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
          </button>
        </div>
      </header>

      <!-- LEFT PANEL (Datasets & Session) -->
      <aside class="panel-left">
        <div class="panel-scroll">

          <!-- Quick Presets -->
          <div class="p-4 bg-navy-800/30 rounded-xl mb-4">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Quick Start</h3>
            <select id="preset-select" aria-label="Select preset configuration" class="select-field mb-2 text-xs">
              <option value="">â€” Select a preset â€”</option>
              <optgroup label="Built-in Presets">
                <option value="quick-demo">ðŸš€ Quick Demo</option>
                <option value="xor-challenge">ðŸŽ¯ XOR Challenge</option>
                <option value="spiral-deep">ðŸŒ€ Deep Spiral</option>
                <option value="multiclass">ðŸŽ¨ Multi-class</option>
                <option value="overfit-demo">ðŸ“ˆ Overfitting Demo</option>
              </optgroup>
              <optgroup id="bookmark-options" label="My Bookmarks">
                <!-- Bookmarks populated dynamically -->
              </optgroup>
            </select>
            <button id="btn-apply-preset" class="btn-primary w-full text-xs" disabled>
              Apply & Load
            </button>
          </div>

          <!-- Dataset Section -->
          <div class="p-4 bg-navy-800/30 rounded-xl mb-4">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Dataset</h3>

            <!-- Compact Dataset Grid -->
            <div class="grid grid-cols-2 gap-2 mb-3 dataset-gallery-grid">
              <!-- Simplified Cards (kept IDs related to JS logic if any, though JS mostly uses data attributes) -->
              <div class="dataset-preview-card p-2" data-dataset="circle" title="Circle">
                <div class="dataset-preview-label text-center text-xs">Circle</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="xor" title="XOR">
                <div class="dataset-preview-label text-center text-xs">XOR</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="spiral" title="Spiral">
                <div class="dataset-preview-label text-center text-xs">Spiral</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="gaussian" title="Gaussian">
                <div class="dataset-preview-label text-center text-xs">Gaussian</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="clusters" title="Clusters">
                <div class="dataset-preview-label text-center text-xs">Clusters</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="iris" title="Iris">
                <div class="dataset-preview-label text-center text-xs">Iris</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="wine" title="Wine">
                <div class="dataset-preview-label text-center text-xs">Wine</div>
              </div>
              <div class="dataset-preview-card p-2" data-dataset="custom" title="Custom">
                <div class="dataset-preview-label text-center text-xs">Draw</div>
              </div>
            </div>

            <!-- Hidden Elements required by JS -->
            <div class="dataset-gallery mb-3 hidden"></div>
            <select id="dataset-select" class="hidden">
              <option value="circle">Circle</option>
            </select>

            <!-- Dataset Options -->
            <div id="dataset-options" class="space-y-2 mb-3">
              <label class="block">
                <span class="input-label">Samples: <span id="samples-value">200</span></span>
                <input type="range" id="input-samples"
                  class="w-full h-2 bg-navy-700 rounded-lg appearance-none cursor-pointer accent-accent-500" value="200"
                  min="50" max="500" step="50" />
              </label>
              <label class="block">
                <span class="input-label">Noise: <span id="noise-value">0.1</span></span>
                <input type="range" id="input-noise"
                  class="w-full h-2 bg-navy-700 rounded-lg appearance-none cursor-pointer accent-accent-500" value="10"
                  min="0" max="50" step="5" />
              </label>
              <label class="block">
                <span class="input-label">Class Balance: <span id="balance-value">50%</span></span>
                <input type="range" id="input-balance"
                  class="w-full h-2 bg-navy-700 rounded-lg appearance-none cursor-pointer accent-accent-500" value="50"
                  min="10" max="90" step="5" />
              </label>
              <label class="block">
                <span class="input-label">Preprocessing</span>
                <select id="input-preprocessing" class="select-field text-xs">
                  <option value="none" selected>None</option>
                  <option value="normalize">Normalize</option>
                  <option value="standardize">Standardize</option>
                </select>
              </label>
            </div>

            <div class="flex gap-2">
              <button id="btn-load-data" class="btn-secondary flex-1 text-xs">Fetch</button>
              <label class="btn-secondary flex-1 cursor-pointer text-center text-xs pt-1">
                CSV <input type="file" id="input-csv-upload" accept=".csv" class="hidden" />
              </label>
            </div>

            <div id="draw-controls" class="mt-3 hidden">
              <div class="text-xs text-slate-400 mb-2">Click chart to add</div>
              <div id="draw-class-buttons" class="flex flex-wrap gap-2"></div>
              <button id="btn-clear-custom" class="btn-secondary w-full mt-2 text-xs">Clear Points</button>
            </div>
          </div>

          <!-- Session Management -->
          <div class="p-4 bg-navy-800/30 rounded-xl mb-4">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Session</h3>
            <div class="flex gap-2 mb-2">
              <button id="btn-save-session" class="btn-secondary flex-1 text-xs">Save</button>
              <button id="btn-load-session" class="btn-secondary flex-1 text-xs">Load</button>
            </div>
            <div class="flex gap-2">
              <button id="btn-share-url" class="btn-secondary flex-1 text-xs">Copy</button>
              <button id="btn-load-config" class="btn-secondary flex-1 text-xs">Paste</button>
            </div>
          </div>

        </div>
      </aside>

      <!-- CENTER PANEL (Viz & History) -->
      <main class="panel-center">
        <!-- Status Header -->
        <div class="flex items-center justify-between mb-4 bg-navy-900/50 p-2 rounded-lg border border-white/5">
          <div class="flex gap-4">
            <div>
              <span class="text-[10px] text-slate-500 uppercase">Epoch</span>
              <div id="status-epoch" class="text-xl font-bold text-accent-400 tabular-nums leading-none">0</div>
            </div>
            <div>
              <span class="text-[10px] text-slate-500 uppercase">Loss</span>
              <div id="status-loss" class="text-xl font-mono font-bold text-orange-400 tabular-nums leading-none">â€”
              </div>
            </div>
            <div>
              <span class="text-[10px] text-slate-500 uppercase">Accuracy</span>
              <div id="status-accuracy" class="text-xl font-mono font-bold text-emerald-400 tabular-nums leading-none">â€”
              </div>
            </div>
          </div>
          <!-- Playback Controls -->
          <div class="flex gap-2">
            <button id="btn-reset"
              class="px-3 py-2 rounded bg-red-900/20 hover:bg-red-900/40 border border-red-900/30 hover:border-red-900/50 text-red-400 hover:text-red-300 font-medium text-xs transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
              title="Reset Training (R)" disabled>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
              </svg>
              Start Over
            </button>
            <button id="btn-step" class="p-2 rounded hover:bg-navy-700 text-slate-300 transition-colors"
              title="Step (S)" disabled>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7" />
              </svg>
            </button>
            <button id="btn-start"
              class="px-4 py-2 rounded bg-gradient-cyan hover:shadow-glow-cyan text-white font-semibold text-xs flex items-center gap-2 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed"
              title="Start/Pause (Space)" disabled>
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z" />
              </svg>
              Start Training
            </button>
            <button id="btn-pause"
              class="px-4 py-2 rounded bg-navy-700 hover:bg-navy-600 text-slate-300 font-medium text-xs hidden flex items-center gap-2 transition-colors"
              title="Start/Pause (Space)">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" />
              </svg>
              Pause
            </button>
          </div>
        </div>

        <!-- Visualization Area -->
        <section id="viz-panel" class="panel-glow relative flex-1 mb-4 flex flex-col"
          aria-label="Neural network visualization">
          <div id="viz-container" role="img" class="flex-1 w-full h-full min-h-[400px]"
            aria-label="Neural network decision boundary visualization">
            <!-- D3 chart renders here -->
            <div id="viz-empty-state"
              class="empty-state-cta absolute inset-0 flex items-center justify-center flex-col pointer-events-none">
              <div class="text-slate-500 mb-2">Ready to Initialize</div>
              <div class="text-xs text-slate-600">Select data and config to begin</div>
            </div>
          </div>

          <!-- Overlays -->
          <div id="loading-overlay"
            class="loading-overlay hidden absolute inset-0 bg-navy-900/80 flex items-center justify-center z-20">
            <div class="spinner"></div>
          </div>

          <!-- Footer Controls for Viz -->
          <div class="absolute bottom-4 left-4 right-4 flex justify-between pointer-events-none">
            <!-- Left: Metric Cards Overlay -->
            <div class="flex gap-2 pointer-events-auto">
              <div class="bg-navy-900/80 backdrop-blur p-2 rounded border border-white/10 text-xs shadow-lg">
                <span class="text-slate-500 block">Val Loss</span>
                <span id="status-val-loss" class="text-red-400 font-mono font-bold">â€”</span>
              </div>
            </div>
            <!-- Right: View Controls (Toggle Switches) -->
            <div
              class="flex gap-4 pointer-events-auto bg-navy-900/80 backdrop-blur p-2 rounded-lg border border-white/10 shadow-lg items-center">
              <label
                class="flex items-center gap-2 text-[10px] text-slate-300 cursor-pointer hover:text-white transition-colors group">
                <input type="checkbox" id="input-show-weights" class="toggle-switch" />
                <span class="font-medium group-hover:text-cyan transition-colors">Weights</span>
              </label>
              <div class="w-px h-4 bg-white/10"></div>
              <label
                class="flex items-center gap-2 text-[10px] text-slate-300 cursor-pointer hover:text-white transition-colors group">
                <input type="checkbox" id="input-Voronoi" class="toggle-switch" />
                <span class="font-medium group-hover:text-cyan transition-colors">Voronoi</span>
              </label>
              <div class="w-px h-4 bg-white/10"></div>
              <label
                class="flex items-center gap-2 text-[10px] text-slate-300 cursor-pointer hover:text-white transition-colors group">
                <input type="checkbox" id="input-3d-view" class="toggle-switch" />
                <span class="font-medium group-hover:text-cyan transition-colors">3D Mode</span>
              </label>
            </div>
          </div>
        </section>

        <!-- Bottom Timeline / Metrics -->
        <div
          class="flex-1 min-h-[250px] bg-navy-900/30 rounded-xl border border-white/5 relative flex flex-col overflow-hidden transition-all duration-300 hover:border-white/10 mt-4">
          <div class="flex items-center justify-between p-2 border-b border-white/5 bg-navy-900/40">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2">
              <svg class="w-3 h-3 text-cyan" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
              </svg>
              Training History
            </h3>
            <div class="flex gap-4 text-[10px] text-slate-500">
              <span class="flex items-center gap-1">Best Loss: <span id="stat-best-loss"
                  class="text-orange-400 font-mono font-bold">â€”</span></span>
              <span class="flex items-center gap-1">Best Acc: <span id="stat-best-accuracy"
                  class="text-emerald-400 font-mono font-bold">â€”</span></span>
              <span class="flex items-center gap-1">Improvement: <span id="stat-improvement"
                  class="text-accent-400 font-mono font-bold">â€”</span></span>
            </div>
          </div>
          <div id="loss-chart-container" class="flex-1 w-full relative">
            <!-- D3 Chart -->
            <div id="loss-chart-empty" class="absolute inset-0 flex items-center justify-center text-slate-700 text-xs">
              No history data
            </div>
          </div>
        </div>

      </main>

      <!-- RIGHT PANEL (Hyperparameters) -->
      <aside class="panel-right">
        <div class="panel-scroll">

          <!-- Hyperparameters -->
          <div class="p-4 bg-navy-800/30 rounded-xl mb-4">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Hyperparameters</h3>
            <div class="space-y-3">
              <div class="grid grid-cols-2 gap-2">
                <label class="block">
                  <span class="input-label">Learning Rate</span>
                  <input type="number" id="input-lr" class="input-field text-xs" value="0.03" min="0.001" max="1"
                    step="0.001" />
                </label>
                <label class="block">
                  <span class="input-label">Optimizer</span>
                  <select id="input-optimizer" class="select-field text-xs">
                    <option value="adam" selected>Adam</option>
                    <option value="sgd">SGD</option>
                    <option value="rmsprop">RMSprop</option>
                  </select>
                </label>
              </div>
              <label class="block">
                <span class="input-label">Hidden Layers</span>
                <input type="text" id="input-layers" class="input-field text-xs" value="8, 4"
                  placeholder="e.g., 8, 4" />
              </label>
              <div class="grid grid-cols-2 gap-2">
                <label class="block">
                  <span class="input-label">Activation</span>
                  <select id="input-activation" class="select-field text-xs">
                    <option value="relu" selected>ReLU</option>
                    <option value="tanh">Tanh</option>
                    <option value="sigmoid">Sigmoid</option>
                  </select>
                </label>
                <label class="block">
                  <span class="input-label">Output</span>
                  <select id="input-num-classes" class="select-field text-xs">
                    <option value="2">Binary</option>
                    <option value="3">3 Class</option>
                    <option value="4">4 Class</option>
                  </select>
                </label>
              </div>

              <button id="btn-init" class="btn-primary w-full text-xs">Initialise Network</button>
            </div>
          </div>

          <!-- Training Config -->
          <div class="p-4 bg-navy-800/30 rounded-xl mb-4">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Training Config</h3>
            <div class="grid grid-cols-2 gap-2 mb-2">
              <label class="block">
                <span class="input-label">Batch Size</span>
                <input type="number" id="input-batch-size" class="input-field text-xs" value="10" />
              </label>
              <label class="block">
                <span class="input-label">Max Epochs</span>
                <input type="number" id="input-max-epochs" class="input-field text-xs" value="100" />
              </label>
            </div>
            <label class="flex items-center gap-2 mb-2">
              <input type="checkbox" id="input-batch-norm" class="checkbox-field" />
              <span class="text-xs text-slate-400">Batch Normalization</span>
            </label>
            <label class="block">
              <span class="input-label">Speed (FPS): <span id="fps-value">60</span></span>
              <input type="range" id="input-fps" class="w-full h-1 accent-accent-500" value="60" min="1" max="60" />
            </label>
          </div>

          <!-- Advanced/Research Accordion -->
          <div class="space-y-2">
            <!-- Regularization -->
            <details class="group bg-navy-800/30 rounded-lg p-2">
              <summary class="text-xs font-bold text-slate-400 cursor-pointer list-none flex justify-between">
                Regularization <span class="group-open:rotate-180 transition-transform">â–¼</span>
              </summary>
              <div class="grid grid-cols-2 gap-2 mt-2">
                <label><span class="text-[10px] text-slate-500">L1</span> <input type="number" id="input-l1"
                    class="input-field text-xs" value="0" /></label>
                <label><span class="text-[10px] text-slate-500">L2</span> <input type="number" id="input-l2"
                    class="input-field text-xs" value="0" /></label>
                <label><span class="text-[10px] text-slate-500">Dropout</span> <select id="input-dropout"
                    class="select-field text-xs">
                    <option value="0">0%</option>
                    <option value="0.2">20%</option>
                    <option value="0.5">50%</option>
                  </select></label>
              </div>
            </details>

            <!-- Classification Metrics -->
            <details class="group bg-navy-800/30 rounded-lg p-2">
              <summary class="text-xs font-bold text-slate-400 cursor-pointer list-none flex justify-between">
                Confusion Matrix <span class="group-open:rotate-180 transition-transform">â–¼</span>
              </summary>
              <div id="confusion-matrix-container" class="mt-2 min-h-[60px] flex justify-center"></div>
              <div class="grid grid-cols-3 gap-1 mt-1 text-center">
                <div class="p-1 bg-navy-900 rounded">
                  <div class="text-[10px] text-slate-500">F1</div>
                  <div id="metric-f1" class="text-xs text-pink-400">â€”</div>
                </div>
                <div class="p-1 bg-navy-900 rounded">
                  <div class="text-[10px] text-slate-500">Prec</div>
                  <div id="metric-precision" class="text-xs text-blue-400">â€”</div>
                </div>
                <div class="p-1 bg-navy-900 rounded">
                  <div class="text-[10px] text-slate-500">Rec</div>
                  <div id="metric-recall" class="text-xs text-purple-400">â€”</div>
                </div>
              </div>
            </details>
          </div>

          <!-- Export Tools -->
          <div class="mt-4 pt-4 border-t border-white/5">
            <div class="grid grid-cols-2 gap-2">
              <button id="btn-export-model-sticky" class="btn-secondary text-xs">Export Model</button>
              <button id="btn-export-history-sticky" class="btn-secondary text-xs">Export Stats</button>
            </div>
          </div>

        </div>
      </aside>

    </div><!-- End Dashboard Grid -->

    <!-- Legacy hidden elements preserved to prevent JS errors -->
    <div id="hidden-legacy-support" class="hidden">
      <button id="btn-quick-start">Quick</button>
      <div id="sidebar-sticky-footer"></div>
      <div id="training-fieldset"></div>
      <input type="file" id="input-load-model" />
      <input type="file" id="input-load-weights" />

      <!-- Mock elements for deprecated tab system if JS still queries them -->
      <button id="tab-btn-setup"></button>
      <button id="tab-btn-train"></button>
      <button id="tab-btn-analyse"></button>
      <div id="tab-setup"></div>
      <div id="tab-train"></div>
      <div id="tab-analyse"></div>

      <!-- Inputs that might be missing from the compact view -->
      <input type="checkbox" id="input-notifications" />
      <input type="checkbox" id="input-record-evolution" />
      <input type="range" id="input-point-size" value="5" />
      <input type="range" id="input-opacity" value="70" />
      <input type="range" id="input-contours" value="10" />
      <input type="checkbox" id="input-zoom" checked />
      <input type="checkbox" id="input-tooltips" checked />
      <input type="checkbox" id="input-highlight-errors" />
      <input type="checkbox" id="input-confidence-circles" />
      <!-- 3D container references -->
      <div id="three-container"> <button id="btn-3d-reset"></button> <button id="btn-3d-top"></button> <button
          id="btn-3d-side"></button> </div>

      <!-- Explanation stuff -->
      <button id="btn-explain-moment"></button>
      <div id="explain-moment-panel"> <button id="btn-close-explanation"></button>
        <div id="explain-message"></div>
        <div id="explain-tip"></div>
      </div>

      <div id="data-point-tooltip"><span id="tooltip-class"></span><span id="tooltip-confidence"></span><span
          id="tooltip-position"></span><span id="tooltip-true-label"></span><span id="tooltip-prediction"></span></div>

      <!-- Research buttons -->
      <button id="btn-lr-finder"></button>
      <button id="btn-feature-importance"></button>
      <button id="btn-lime-explain"></button>
      <button id="btn-saliency-map"></button>
      <button id="btn-adversarial"></button>
      <button id="btn-uncertainty"></button>
      <button id="btn-nas"></button>
      <button id="btn-ab-compare"></button>
      <button id="btn-ensemble"></button>
      <button id="btn-save-baseline"></button>
      <button id="btn-clear-baseline"></button>
      <div id="comparison-panel">
        <div id="comparison-diff"></div>
      </div>
      <div id="ab-comparison-panel"> <span id="ab-epoch-a"></span> <span id="ab-epoch-b"></span> <button
          id="btn-stop-ab"></button> </div>
      <div id="ensemble-panel"> <button id="btn-add-ensemble-member"></button> <button id="btn-train-ensemble"></button>
        <button id="btn-stop-ensemble"></button>
      </div>
    </div>

  </div> <!-- app-container -->

  <!-- HELP & ONBOARDING MODALS (Preserved) -->
  <div id="help-modal" class="fixed inset-0 bg-black/60 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-navy-800 rounded-xl border border-navy-600 shadow-2xl max-w-lg w-full max-h-[80vh] overflow-hidden">
      <button id="help-close" class="hidden">Close</button>
      <!-- Content preserved for structure, hidden/simplified -->
    </div>
  </div>

  <div id="onboarding-modal" class="hidden"></div>
  <div id="ab-modal" class="hidden"></div>

  <!-- SCRIPT IMPORT -->
  <script type="module" src="/src/main.ts"></script>
</body>

</html>